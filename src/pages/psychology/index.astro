---
import BaseLayout from "../../layouts/BaseLayout.astro";
import TagList from "../../components/TagList.astro";
import { getCollection } from "astro:content";

const base = import.meta.env.BASE_URL;

const posts = await getCollection("psychology", ({ data }) => !data.draft);
const sortedPosts = posts.sort(
  (a, b) => b.data.date.valueOf() - a.data.date.valueOf()
);
---

<BaseLayout title="心理" description="心理學文章與深度思考。">
  <section class="list-page">
    <header class="list-hero">
      <p class="eyebrow">心理</p>
      <h1>探索心靈的深度思考。</h1>
      <p class="lead">
        心理學文章、人性洞察與自我成長的完整論述。
      </p>
    </header>
    <div class="list-grid">
      {sortedPosts.map((post) => (
        <article class="card">
          <p class="meta">
            {post.data.date.toLocaleDateString("zh-TW", {
              year: "numeric",
              month: "short",
              day: "numeric",
            })}
          </p>
          <h3><a href={`${base}psychology/${post.slug}/`}>{post.data.title}</a></h3>
          <p>{post.data.description}</p>
          <TagList tags={post.data.tags ?? []} />
        </article>
      ))}
    </div>
  </section>
</BaseLayout>
